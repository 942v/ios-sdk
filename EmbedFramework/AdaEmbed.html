<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            </head>
    <body style="height: 100vh; margin: 0;">
        <div id="parent-element" style="height: 100vh; width: 100vw;"></div>
    </body>
    <script>
        window.adaSettings = {
            parentElement: "parent-element"
        }
    </script>
    <script
        async
        id="__ada"
        src="https://static.ada.support/embed.js"
        data-lazy
        onload="onLoadHandler()"
        ></script>
    <script>
        function onLoadHandler() {
            // Tell framework Embed is ready
            try {
                window.webkit.messageHandlers.embedReady.postMessage("ready");
            } catch(err) {
                console.error("Can not reach native code");
            }
        }
    
    function initializeEmbed(data) {
        const decodedData = window.atob(data)
        const parsedData = JSON.parse(decodedData)
        const { handle, cluster, language, styles, greeting, metaFields } = parsedData;
        
        adaEmbed.start({
                       handle,
                       parentElement: "parent-element",
                       cluster,
                       language,
                       styles,
                       greeting,
                       metaFields
                       });
    }
    
    function setMetaFields(data) {
        const decodedData = window.atob(data)
        const parsedData = JSON.parse(decodedData)
        
        adaEmbed.setMetaFields(parsedData);
    }
    </script>
    </html>
